#include "ADP8866_reg.h"

#include "..\..\ucPeripheralDrivers\i2c_connection.h"
#include "..\..\ucPeripheralDrivers\leuart_connection.h"

#ifndef TRUE
	#define TRUE	(1)
#endif
#ifndef FALSE
	#define FALSE	(0)
#endif
#if TRUE == FALSE
	#error("TRUE macro == FALSE macro");
#endif

#define ADP8866_ADDR	(0x27*2)

uint8_t ADP8866_Detect_LowLevel(void)
{
	return i2c_Detect(I2C0, ADP8866_ADDR);
}

typedef enum {
	ADP8866_MANUFACTURER_ID_REG  						= 0x00,
	ADP8866_MODE_CONTROL_REG							= 0x01,
	ADP8866_INTERRUPT_STATUS_REG						= 0x02,
	ADP8866_INTERRUPT_ENABLE_REG						= 0x03,
	ADP8866_INDEPENDENT_SINK_INT_SEL_1_REG				= 0x04,
	ADP8866_INDEPENDENT_SINK_INT_SEL_2_REG				= 0x05,
	ADP8866_CHARGE_PUMP_GAIN_REG						= 0x06,
	ADP8866_OUTPUT_LEVEL_SEL_1_REG						= 0x07,
	ADP8866_OUTPUT_LEVEL_SEL_2_REG						= 0x08,
	ADP8866_LED_POWER_SOURCE_SEL_1_REG					= 0x09,
	ADP8866_LED_POWER_SOURCE_SEL_2_REG					= 0x0A,


	ADP8866_BACKLIGHT_CONF_REG							= 0x10,
	ADP8866_BACKLIGHT_SEL_REG							= 0x11,
	ADP8866_BACKLIGHT_FADE_REG							= 0x12,
	ADP8866_BACKLIGHT_MAX_CURRENT_REG					= 0x13,

	ADP8866_INDEPENDENT_SINK_CURRENT_CTR_1_REG			= 0x1A,
	ADP8866_INDEPENDENT_SINK_CURRENT_CTR_2_REG			= 0x1B,
	ADP8866_INDEPENDENT_SINK_CURRENT_TIME_1_REG			= 0x1C,
	ADP8866_INDEPENDENT_SINK_CURRENT_TIME_2_REG			= 0x1D,
	ADP8866_INDEPENDENT_SINK_6_OFF_TIMER_REG			= 0x1E,
	ADP8866_INDEPENDENT_SINK_7_OFF_TIMER_REG			= 0x1F,
	ADP8866_INDEPENDENT_SINK_8_OFF_TIMER_REG			= 0x20,
	ADP8866_INDEPENDENT_SINK_9_OFF_TIMER_REG			= 0x21,
	ADP8866_INDEPENDENT_SINK_CURRENT_FADE_REG			= 0x22,

	ADP8866_SINK_CURRENT_LED_1_REG						= 0x23,
	ADP8866_SINK_CURRENT_LED_2_REG						= 0x24,
	ADP8866_SINK_CURRENT_LED_3_REG						= 0x25,
	ADP8866_SINK_CURRENT_LED_4_REG						= 0x26,
	ADP8866_SINK_CURRENT_LED_5_REG						= 0x27,
	ADP8866_SINK_CURRENT_LED_6_REG						= 0x28,
	ADP8866_SINK_CURRENT_LED_7_REG						= 0x29,
	ADP8866_SINK_CURRENT_LED_8_REG						= 0x2A,
	ADP8866_SINK_CURRENT_LED_9_REG						= 0x2B,

	ADP8866_HEARTBEAT_ENABLE_SEL_REG					= 0x2C,
	ADP8866_INDEPENDENT_SINK_6_HEAR_PULSES_REG			= 0x2D,
	ADP8866_INDEPENDENT_SINK_7_HEAR_PULSES_REG			= 0x2E,
	ADP8866_INDEPENDENT_SINK_8_HEAR_PULSES_REG			= 0x2F,
	ADP8866_INDEPENDENT_SINK_9_HEAR_PULSES_REG			= 0x30,

	ADP8866_INDEPENDENT_SINK_6_TIM_OFF_HEAR_PULSES_REG	= 0x31,
	ADP8866_INDEPENDENT_SINK_7_TIM_OFF_HEAR_PULSES_REG	= 0x32,
	ADP8866_INDEPENDENT_SINK_8_TIM_OFF_HEAR_PULSES_REG	= 0x33,
	ADP8866_INDEPENDENT_SINK_9_TIM_OFF_HEAR_PULSES_REG	= 0x34,

	ADP8866_HEARTBEAT_ON_TIME_REG						= 0x35,

	ADP8866_ENABLE_DELAY_TIME_SC6_REG					= 0x3C,
	ADP8866_ENABLE_DELAY_TIME_SC7_REG					= 0x3D,
	ADP8866_ENABLE_DELAY_TIME_SC8_REG					= 0x3E,
	ADP8866_ENABLE_DELAY_TIME_SC9_REG					= 0x3F
} ADP8866_Registers_t;

static void ADP8866_SetRegister(ADP8866_Registers_t ADP8866_reg, uint8_t val)
{
	i2c_RegisterSet(I2C0, ADP8866_ADDR, (uint8_t)ADP8866_reg, val);
}

static void ADP8866_GetRegister(ADP8866_Registers_t ADP8866_reg, uint8_t *val)
{
	i2c_RegisterGet(I2C0, ADP8866_ADDR, (uint8_t)ADP8866_reg, val);
}


void ADP8866_SetModeControl()
